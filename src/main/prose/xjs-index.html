<html>
<!-- 
This work is released into the Public Domain under the
terms of the Creative Commons CC0 1.0 Universal license.
https://creativecommons.org/publicdomain/zero/1.0/
-->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<link rel="stylesheet" type="text/css" href="pityoulish.css" />
<title>Exercise: Message Board Client with Sockets </title>
</head>
<body>
<h1 id="exercise" class="title">
  <span>Exercise: Message Board Client with Sockets</span>
</h1>
<p class="abstract">
During this exercise, you will get a glimpse of what it means to
implement a low-level protocol interface on top of socket connections.
</p>

<div class="larger">
<p>
Your task is to find and fix errors in a Java client program.
The client communicates with a <a href="message-board.html">Message Board</a>
server using a <a href="protocol-tlv.html">Binary Protocol</a>.
The server is operated by the instructor.
The client, when fixed, enables you to put messages on the board,
and to read the messages others have put there.
</p>

<p>
A recipe for solving this task has been conveyed beforehand in a Tutorial.
If you failed to complete the Tutorial, you're probably screwed now.
Instructions below recap the major steps just briefly.
The sections appear in chronological order, more or less:
</p>

<ol>
<li><a href="#setup">Setup</a> before you begin</li>
<li><a href="#sequence">Define</a> a test sequence</li>
<li><a href="#testfixbuild">Test, Fix, Build</a>, repeat</li>
<li><a href="#code">Code Overview</a> for fixing</li>
<li><a href="#learned">Lessons Learned</a> when done</li>
</ol>

</div>


<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
<h2 id="setup"><span>Setup</span></h2>
<!--h2 id="prepare"><span>Prepare</span></h2-->

<p>
You already set up a Java development environment in the Tutorial.
Editor, Java compiler and tools, maybe an IDE, are readily available.
Good.
</p>

<p>
You already know how to access the instructions for this exercise,
because you're reading them. Good.
Other useful things you could open in separate browser tabs are
the Java Platform API specification (aka standard JavaDocs)
and the Tutorial instructions.
Where to find either depends on the network setup.
</p>

<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
<h3 id="connectivity"><span>Network</span></h3>

<p>
Connect your computer to the network with the server, if you have not
done so already. The instructor provides the necessary information,
along with the following:
</p>
<ul>
<li>IP address and port number of the Message Board server.
  A hostname may replace the IP address.</li>
<li>URL to the Java Platform API JavaDocs,
  if the network is isolated from the Internet.</li>
<li>URL to this exercise, optionally.</li>
<li>URL to the Tutorial, optionally.</li>
</ul>


<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
<h3 id="client"><span>Client</span></h3>

<div class="box-right">
<dl>
<dt><a href="mbclient-sockets-faulty.jar"
       ><code>mbclient-sockets-faulty.jar</code></a></dt>
<dd>The program to test and fix. Usage instructions:
  <br/><code>&nbsp;&nbsp;java -jar mbclient-sockets-faulty.jar</code><br/>
  Sources are in the jar, <a href="jdoc/index.html">docs</a> here.
</dd>
</dl>
</div><!-- box-right -->

<p>
Download the client, <a href="mbclient-sockets-faulty.jar"
                        ><code>mbclient-sockets-faulty.jar</code></a>,
and give it a decent filename.
Remember how important it is to keep a positive mindset:
<i>You will extirpate all faultiness.</i>
Start with the filename.
</p>

<p>
Run the client without arguments to obtain the usage instructions.
Read and understand those.
If you haven't done so already, read the high-level description
of the <a href="message-board.html">Message Board</a> now.
You will notice that the commands supported by the client
match with the operations defined for a Message Board.
</p>


<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
<h2 id="sequence"><span>Define a Test Sequence</span></h2>

<p>
Some commands of the client depend upon others.
For example, putting a message on the board depends on obtaining a ticket.
And listing messages starting at a marker depends on
getting a marker from a previous listing.
Testing the full client functionality therefore requires execution of all
commands in a logical sequence. Commands with different possible arguments,
or with different possible results, should be covered in all variations.
</p>

<p>
In practice, defining test cases that thoroughly cover a program or API
requires good knowledge of that program or API, and some experience.
To get you started with this exercise,
you may use the following test sequence:
</p>
<ol>
<li>
List messages from the board, without marker.
</li>
<li>
Obtain a ticket.
</li>
<li>
Put some messages on the board.
</li>
<li>
List messages again, with and without marker.
Make sure to use different markers.
</li>
<li>
Return a ticket.
Use it again afterwards, to verify that it is no longer valid.
</li>
<li>
Replace a ticket, before and after exhausting all operations.
</li>
</ol>

<p>
That sequence covers only a few of the error cases, but that is sufficient
for the exercise. You don't have to test for invalid arguments, for example.
Not knowing for how long a ticket is valid, or how many operations it permits,
will confront you with enough error situations to get into the spirit.
</p>

<p>
That sequence is also missing some good cases.
You may encounter them perchance, but they are not enforced.
See if you can spot those gaps in the test coverage throughout the exercise.
<!-- known gaps:
1. List messages with an empty result list.
   Likely to be encountered when testing with markers.
   Impossible to be encountered without marker, because the server
   initially puts at least one system message on the board.
2. List messages with a "Missed" indicator in the result.
   Unlikely to be encountered. Probability depends on board capacity,
   message volume, and how much time you take for testing with markers.
   To force this situation, you can get a marker from the beginning of
   the board (list with limit 1), then put enough messages on the board
   to drop that one and the next user message.
-->
</p>


<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
<h2 id="testfixbuild"><span>Test, Fix, Build, repeat</span></h2>

<ul class="todo">
<li>
Load the client into your IDE if you use one.
</li>
<li>
Start testing.
</li>
<li>
Locate the problem.
</li>
<li>
THINK! See below for code overview.
</li>
<li>
Fix, build, and iterate.
</li>
<li>
When done, clean up by removing package <code>pityoulish.outtake</code>.
</li>
</ul>


<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
<h2 id="code"><span>Code Overview</span></h2>

<ul class="todo">
<li>
JavaDoc, only two packages of relevance.
</li>
<li>
Identify the command handler class.
</li>
<li>
See package-level JavaDoc for further information.
</li>
<li>
Only go into source files if you absolutely have to fix something in there.
</li>
</ul>


<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
<h2 id="learned"><span>Lessons Learned</span></h2>

<!-- How much of this here, how much in Instructor's Notes? -->
<ul class="todo">
<li>
Did you get through the full test sequence?
</li>
<li>
Did you find and fix all the problems?
Spotted things not covered by the test sequence?
</li>
<li>
What problems did you encounter?
Besides the errors that you fixed, of course.
</li>
<li>
How do you like coding on this level?
</li>
<li>
Found something in the code that you'd like to improve?
Besides the errors that you fixed, of course.
</li>
<li>
From here...
Want to do some home programming?
Help with the Open Source project?
</li>
</ul>

</body>
</html>

